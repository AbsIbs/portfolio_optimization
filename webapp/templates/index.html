<DOCTYPE html>
<html langs="en">
<head>
    <title>Home</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="../static/styles/styles.css">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.js"></script>
    <script>callback();</script>
    <script>callback2();</script>
    <script>callback3_1();</script>
    <script>callback3_2();</script>
</head>
<body>
    <div class="loader-wrapper">
        <span class="loader"><span class="loader-inner"></span></span>
    </div>
    <nav class="navbar">
        <ul>
            <li><a href="#home">Home</a></li>
            <li><a href="#dashboard">Dashboard</a></li>
            <li><a href="#reportA">Report A</a></li>
            <li><a href="#reportB">Report B</a></li>
            <li><a href="#backTesting">Back Testing</a></li>
            <li><a href="#modelling">Modelling</a></li>
        </ul>
    </nav>
    <div class="container">
        <section id="home">
            <div class="textPosition">
                <div class="flex-1-1">
                    <p>
                        <h1 style="font-size: 16px; font-weight: bold; display: flex;">Abass Ibrahim</h1>
                    </p>
                    <p style="font-size: 2.5em; margin-top: 0; margin-bottom: 0;">Portfolio Optimization<br>With Reinforcement Learning</p>
                    <p style="font-weight: normal; font-size: 1.4em;">
                        The aim of this project was to utilize reinforcement learning to train a machine to learn<br>
                        how to rebalance a portfolio of stocks given what happened previously in the market.<br>
                        The project futher conducts sentiment analysis on tweets regarding traded companies <br> into positive or negative.<br>
                    </p>
                    <br>
                    <a href="https://github.com/AbsIbs/portfolio_optimization" target="_blank" rel="noopener noreferrer">
                        <div class="rectangle" style="box-shadow: 0.5rem 0.5rem black; background-color: 1C1E3D;">
                            <p style="color: white; font-weight: normal; font-size: 1rem;">
                                GitHub repo
                            </p>      
                        </div>
                    </a>
                </div>
                <div class="flex-1-2">
                    <span class="frontLogoPosition"></span><img class="frontLogo" src="../static/img/front_page.png" style="margin-right: 2rem;">
                </div>
            </div>
        </section>
        <section id="dashboard">
            <div class="dashboardBanPosition">
                <div class="dashboardBan">
                    <div class="BanRectangle">
                        <img src="../static/img/company.png" style="height: 2rem; padding-right: 1rem;">
                        <p>
                            <div class="BAN" style="font-weight: bold; color: black; font-size:1.5rem; line-height: 1.25;">
                                <span id="companyName">-</span>
                                <div class="BanDesc">Company Name</div>                                     
                            </div>                                   
                        </p>
                    </div>    
                    <div class="BanRectangle">
                        <img src="../static/img/industry.png" style="height: 2rem; padding-right: 1rem;">
                        <p>
                            <div class="BAN" style="font-weight: bold; color: black; font-size:1.5rem; line-height: 1.25;">
                                <span id="sector">-</span>
                                <div class="BanDesc">Sector</div>                                     
                            </div>                                   
                        </p>
                    </div>    
                    <div class="BanRectangle">
                        <div class="separator"></div>
                    </div>
                    <div class="BanRectangle">
                        <img src="../static/img/uptrend.png" style="height: 2rem; padding-right: 1rem;">
                        <p>
                            <div class="BAN" style="font-weight: bold; color: black; font-size:1.5rem; line-height: 1.25;">
                                <span id="ROI">-</span>%
                                <div class="BanDesc">ROI</div>                                     
                            </div>                                   
                        </p>
                    </div>     
                    <div class="BanRectangle">
                        <img src="../static/img/risk.png" style="height: 2rem; padding-right: 1rem;">
                        <p>
                            <div class="BAN" style="font-weight: bold; color: black; font-size:1.5rem; line-height: 1.25;">
                                <span id="std">-</span>
                                <div class="BanDesc">Risk (std)</div>                                     
                            </div>                                   
                        </p>
                    </div>    
                </div>   
                <br>
                <div class="graphFormContainer" style="align-items: center; background-color: white;">
                    <div class="form" style="flex: 1;">
                        <form method="GET">
                            <div style="font-weight: bold; box-shadow: 0 0 0; font-size: 1.5rem; color: #1C1E3D;">
                                Stock Prices
                            </div>
                            Select from the list of constituents
                            <label for="stock">Ticker</label>
                            <select id="stock" name="stock" aria-label="Select">
                                <option value="AAPL">AAPL</option>
                                <option value="AMGN">AMGN</option>
                                <option value="AXP">AXP</option>
                                <option value="BA">BA</option>
                                <option value="CAT">CAT</option>
                                <option value="CRM">CRM</option>
                                <option value="CSCO">CSCO</option>
                                <option value="CVX">CVX</option>
                                <option value="DIS">DIS</option>
                                <option value="DOW">DOW</option>
                                <option value="GS">GS</option>
                                <option value="HD">HD</option>
                                <option value="HON">HON</option>
                                <option value="IBM">IBM</option>
                                <option value="INTC">INTC</option>
                                <option value="JNJ">JNJ</option>
                                <option value="JPM">JPM</option>
                                <option value="KO">KO</option>
                                <option value="MCD">MCD</option>
                                <option value="MMM">MMM</option>
                                <option value="MRK">MRK</option>
                                <option value="MSFT">MSFT</option>
                                <option value="NKE">NKE</option>
                                <option value="PG">PG</option>
                                <option value="TRV">TRV</option>
                                <option value="UNH">UNH</option>
                                <option value="V">V</option>
                                <option value="VZ">VZ</option>
                                <option value="WBA">WBA</option>
                                <option value="WMT">WMT</option>
                            </select>
                            <label for="period">Period</label>
                            <select id="period" name="period" aria-label="Select">
                                <option value="1mo">1-month</option>
                                <option value="6mo">6-months</option>
                                <option value="1y">1-year</option>
                                <option value="max">Max period</option>
                            </select>
                            <label for="interval">Interval</label>
                            <select id="interval" name="interval" aria-label="Select">
                                <option value="1d">Daily</option>
                                <option value="1wk">Weekly</option>
                                <option value="1mo">Monthly</option>
                                <option value="3mo">Quarterly</option>
                                <option value="1y">Yearly</option>
                            </select>
                            <button type="button" class="btn btn-primary" onclick="callback()">Fetch</button>
                        </form>
                    </div>
                    <div class="chartBox" style="flex: 2;">
                        <div id="chart"></div>
                    </div>
                </div>
            </div>
        </section>
        <section id="reportA">
            <div class="container">
                <section id="A1" style="display: flex;">
                    <div class="dashboardBanPosition" style="display: flex; align-items: center; margin-top: 0rem;">
                        <div class="graphFormContainer" style="box-shadow: none;">
                            <div class="ReportImg">
                                <img src="../static/img/RL_business_statement.png" style="width: 95%; height: auto;">
                            </div>
                            <div class="ReportDescription">
                                <div style="background-color: transparent;">
                                    <p style="font-weight: bold; font-size: 1.5rem; margin-top: 0; margin-bottom: 0; padding: 1rem 1rem 1rem; color: #1C1E3D">BUSINESS PROBLEM</p>
                                    <p style="font-weight: 500; font-size: 1rem; padding: 1rem 1rem 1rem; color: #1C1E3D">
                                        My project aims to solve the problem of ‘given what happened in the market yesterday, what is the best way to allocate my portfolio of assets?’ by leveraging Reinforcement learning. 
                                        <br><br>
                                        This approach is a shift from traditional stock market decision-making techniques which focus on predictions. Rather, this approach places emphasis on reacting to prior states of the market.
                                        <br><br>
                                        <a href="#A2"><img src="../static/img/after.png" style="width: 5%; height: auto;"></a>
                                    </p>
                                </div> 
                            </div>
                        </div>
                    </div>
                </section>
                <section id="A2" style="display: flex;">
                    <div class="dashboardBanPosition" style="display: flex; align-items: center;">
                        <div class="graphFormContainer" style="box-shadow: none;">
                            <div class="ReportImg">
                                <img src="../static/img/rl_1.png" style="width: 95%; height: auto;">
                            </div>
                            <div class="ReportDescription">
                                <div style="background-color: transparent;">
                                    <p style="font-weight: bold; font-size: 1.5rem; margin-top: 0; margin-bottom: 0; padding: 1rem 1rem 1rem; color: #1C1E3D">REINFORCEMENT LEARNING (1/2)</p>
                                    <p style="font-weight: 500; font-size: 1rem; padding: 1rem 1rem 1rem; color: #1C1E3D">
                                        RL is a type of machine learning technique that uses a reward/punishment system in order to train a machine. Specifically, the machine acts within a premade environment and learns to take the best actions by maximizing its rewards. 
                                        The possible actions that are available are determined by the action space whilst the information given to the machine is determined by the observation state (a sample of the environment).                                         
                                        <br><br>
                                        <a href="#A1"><img src="../static/img/previous.png" style="width: 5%; height: auto"></a>
                                        <a href="#A3"><img src="../static/img/after.png" style="width: 5%; height: auto;"></a>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                <section id="A3" style="display: flex;">
                    <div class="dashboardBanPosition" style="display: flex; align-items: center;">
                        <div class="graphFormContainer" style="box-shadow: none;">
                            <div class="ReportImg">
                                <img src="../static/img/rl_2.png" style="width: 95%; height: auto;">
                            </div>
                            <div class="ReportDescription">
                                <div style="background-color: transparent;">
                                    <p style="font-weight: bold; font-size: 1.5rem; margin-top: 0; margin-bottom: 0; padding: 1rem 1rem 1rem; color: #1C1E3D">REINFORCEMENT LEARNING (2/2)</p>
                                    <p style="font-weight: 500; font-size: 1rem; padding: 1rem 1rem 1rem; color: #1C1E3D">
                                        The machine is given an observation, takes an action in response to this and creates a new state. That new state is analysed and if it is desirable, then a reward is given. 
                                        If not, a punishment is given. This sequence repeats until all observations have been met or a reward threshold is reached.                                      
                                        <br><br>
                                        <a href="#A2"><img src="../static/img/previous.png" style="width: 5%; height: auto"></a>
                                        <a href="#A4"><img src="../static/img/after.png" style="width: 5%; height: auto;"></a>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                <section id="A4" style="display: flex;">
                    <div class="dashboardBanPosition" style="display: flex; align-items: center;">
                        <div class="graphFormContainer" style="box-shadow: none;">
                            <div class="ReportImg">
                                <img src="../static/img/rl_Dataset.png" style="width: 95%; height: auto;">
                            </div>
                            <div class="ReportDescription">
                                <div style="background-color: transparent;">
                                    <p style="font-weight: bold; font-size: 1.5rem; margin-top: 0; margin-bottom: 0; padding: 1rem 1rem 1rem; color: #1C1E3D">DATA AND FEATURE ENGINEERING</p>
                                    <p style="font-weight: 500; font-size: 1rem; padding: 1rem 1rem 1rem; color: #1C1E3D">
                                        The dataset comprised of the 30 constituents from the DOW Jones Industrial Index. Historical stock price information was gathered through the yahoo finance api. 
                                        The data was structured as a panel dataset.                                    
                                        <br><br>
                                        The initial features consisted of High, Low, Close, Volume. Technical indicators focusing on trends, momentum and volume were also included e.g., MACD, RSI and MFI.  
                                        <br><br>
                                        <a href="#A3"><img src="../static/img/previous.png" style="width: 5%; height: auto"></a>
                                        <a href="#A5"><img src="../static/img/after.png" style="width: 5%; height: auto;"></a>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                <section id="A5" style="display: flex;">
                    <div class="dashboardBanPosition" style="display: flex; align-items: center;">
                        <div class="graphFormContainer" style="box-shadow: none;">
                            <div class="ReportImg">
                                <img src="../static/img/rl_methodology.png" style="width: 95%; height: auto;">
                            </div>
                            <div class="ReportDescription">
                                <div style="background-color: transparent;">
                                    <p style="font-weight: bold; font-size: 1.5rem; margin-top: 0; margin-bottom: 0; padding: 1rem 1rem 1rem; color: #1C1E3D">METHODOLOGY</p>
                                    <p style="font-weight: 500; font-size: 1rem; padding: 1rem 1rem 1rem; color: #1C1E3D">
                                        - Observation space: 252 trading-days covariance matrix based on ROI<br>
                                        - Action space: buy/sell/hold<br>
                                        - Training period: 2013-04-26 to 2019-01-28<br>
                                        - Validation period: 2019-01-29 to 2020-07-07<br>
                                        - Testing period: 2020-07-08 to 2022-04-22<br>
                                        - Algorithms: A2C, PPO, DDPG, SAC<br>
                                        - The machine would then trade with an initial capital of $1,000,000.
                                        <br><br>
                                        <a href="#A4"><img src="../static/img/previous.png" style="width: 5%; height: auto"></a>
                                        <a href="#A6"><img src="../static/img/after.png" style="width: 5%; height: auto;"></a>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                <section id="A6" style="display: flex;">
                    <div class="dashboardBanPosition" style="display: flex; align-items: center;">
                        <div class="graphFormContainer" style="box-shadow: none;">
                            <div class="ReportImg">
                                <div id="RL_ReportGraph" style="width: 95%; height: auto;"></div>
                            </div>
                            <div class="ReportDescription">
                                <div style="background-color: transparent;">
                                    <p style="font-weight: bold; font-size: 1.5rem; margin-top: 0; margin-bottom: 0; padding: 1rem 1rem 1rem; color: #1C1E3D">MODEL RESULTS</p>
                                    <p style="font-weight: 500; font-size: 1rem; padding: 1rem 1rem 1rem; color: #1C1E3D">
                                        The model results were certainly interesting. For the validation set, the market return was 12.2% whilst our best model achieved 14.1% ROI. <br><br>
                                        Whilst this may look impressive at first, we must also investigate another key metric, sharpe ratio. This refers to how much ROI is gained for every unit of risk taken. <br><br>
                                        This is a metric that should be maximized. The market achieved an ROI of 12.2% with a sharpe ratio of around 2.2. In comparison, our best model achieved a 14.1% ROI with a sharpe ratio of around 0.46. <br><br>
                                        This means that our model took on a significantly greater amount of risk for a 2% ROI difference.
                                        <br><br>
                                        <a href="#A5"><img src="../static/img/previous.png" style="width: 5%; height: auto"></a>
                                        <a href="#A7"><img src="../static/img/after.png" style="width: 5%; height: auto;"></a>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                <section id="A7" style="display: flex;">
                    <div class="dashboardBanPosition" style="display: flex; align-items: center;">
                        <div class="graphFormContainer" style="box-shadow: none;">
                            <div class="ReportImg">
                                <img src="../static/img/rl_conclusion.png" style="width: 95%; height: auto;">
                            </div>
                            <div class="ReportDescription">
                                <div style="background-color: transparent;">
                                    <p style="font-weight: bold; font-size: 1.5rem; margin-top: 0; margin-bottom: 0; padding: 1rem 1rem 1rem; color: #1C1E3D">CONCLUSION</p>
                                    <p style="font-weight: 500; font-size: 1rem; padding: 1rem 1rem 1rem; color: #1C1E3D">
                                        To conclude, our RL models do seem useful as they were able to beat the market. However, they did so at a far greater cost.<br><br>
                                        To increase the sharpe, different neural network architectures for the agent should be experimented with.<br><br>
                                        Additional technical indicators may also be included along with a longer training period.<br><br>
                                        At present, this model is only useful for those willing to take on a disproporational amount of risk to beat the market
                                        <br><br>
                                        <a href="#A6"><img src="../static/img/previous.png" style="width: 5%; height: auto"></a>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </section>
        <section id="reportB">
            <div class="container">
                <section id="B1" style="display: flex;">
                    <div class="dashboardBanPosition" style="display: flex; align-items: center; margin-top: 0rem;">
                        <div class="graphFormContainer" style="box-shadow: none;">
                            <div class="ReportImg">
                                <img src="../static/img/sa_business_statement.png" style="width: 95%; height: auto;">
                            </div>
                            <div class="ReportDescription">
                                <div style="background-color: transparent;">
                                    <p style="font-weight: bold; font-size: 1.5rem; margin-top: 0; margin-bottom: 0; padding: 1rem 1rem 1rem; color: #1C1E3D">BUSINESS PROBLEM</p>
                                    <p style="font-weight: 500; font-size: 1rem; padding: 1rem 1rem 1rem; color: #1C1E3D">
                                        Sentiment analysis is a fundamental practice in trading. This is even more so in today’s world where social media is rife with opinions on trading. <br><br>
                                        As such, I have extended the project by including an NLP classification model that classifies tweets regarding trading into positive or negative sentiments.
                                        <br><br>
                                        <a href="#B2"><img src="../static/img/after.png" style="width: 5%; height: auto;"></a>
                                    </p>
                                </div> 
                            </div>
                        </div>
                    </div>
                </section>
                <section id="B2" style="display: flex;">
                    <div class="dashboardBanPosition" style="display: flex; align-items: center;">
                        <div class="graphFormContainer" style="box-shadow: none;">
                            <div class="ReportImg">
                                <img src="../static/img/sa_dataset.png" style="width: 95%; height: auto;">
                            </div>
                            <div class="ReportDescription">
                                <div style="background-color: transparent;">
                                    <p style="font-weight: bold; font-size: 1.5rem; margin-top: 0; margin-bottom: 0; padding: 1rem 1rem 1rem; color: #1C1E3D">DATASET</p>
                                    <p style="font-weight: 500; font-size: 1rem; padding: 1rem 1rem 1rem; color: #1C1E3D">
                                        The dataset was retrieved from Kaggle. The unbalanced dataset contains near 6000 English tweets with 63% classified as positive sentiments and 37% classified as negative.                                       
                                        <br><br>
                                        <a href="#B1"><img src="../static/img/previous.png" style="width: 5%; height: auto"></a>
                                        <a href="#B3"><img src="../static/img/after.png" style="width: 5%; height: auto;"></a>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                <section id="B3" style="display: flex;">
                    <div class="dashboardBanPosition" style="display: flex; align-items: center;">
                        <div class="graphFormContainer" style="box-shadow: none;">
                            <div class="ReportImg">
                                <img src="../static/img/sa_methodology.png" style="width: 95%; height: auto;">
                            </div>
                            <div class="ReportDescription">
                                <div style="background-color: transparent;">
                                    <p style="font-weight: bold; font-size: 1.5rem; margin-top: 0; margin-bottom: 0; padding: 1rem 1rem 1rem; color: #1C1E3D">METHODOLOGY</p>
                                    <p style="font-weight: 500; font-size: 1rem; padding: 1rem 1rem 1rem; color: #1C1E3D">
                                        The methodology follows the general steps of text preprocessing for NLP modelling. <br><br>
                                        For this project, the vectorization technique used is a simple count vectorizer. <br><br>
                                        Whilst I tracked each of the 4 metrics, the main metric of interest is accuracy.
                                        <br><br>
                                        <a href="#B2"><img src="../static/img/previous.png" style="width: 5%; height: auto"></a>
                                        <a href="#B4"><img src="../static/img/after.png" style="width: 5%; height: auto;"></a>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                <section id="B4" style="display: flex;">
                    <div class="dashboardBanPosition" style="display: flex; align-items: center;">
                        <div class="graphFormContainer" style="box-shadow: none;">
                            <div class="ReportImg">
                                <img src="../static/img/word_cloud.png" style="width: 95%; height: auto;">
                            </div>
                            <div class="ReportDescription">
                                <div style="background-color: transparent;">
                                    <p style="font-weight: bold; font-size: 1.5rem; margin-top: 0; margin-bottom: 0; padding: 1rem 1rem 1rem; color: #1C1E3D">INITIAL FINDINGS</p>
                                    <p style="font-weight: 500; font-size: 1rem; padding: 1rem 1rem 1rem; color: #1C1E3D">
                                        For the EDA, focus was given to constructing word clouds. This gives a visual representation of the distribution of words used for positive and negative sentiments.<br><br>
                                        From the images, we see that words such as ‘buy, long and break’ were most common for positive sentiments. In contrast, words such as ‘coronavirus, sell and stop’ were very common in negative sentiments. 
                                        <br><br>
                                        <a href="#B3"><img src="../static/img/previous.png" style="width: 5%; height: auto"></a>
                                        <a href="#B5"><img src="../static/img/after.png" style="width: 5%; height: auto;"></a>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                <section id="B5" style="display: flex;">
                    <div class="dashboardBanPosition" style="display: flex; align-items: center;">
                        <div class="graphFormContainer" style="box-shadow: none;">
                            <div class="ReportImg">
                                <div id="SA_ReportGraph" style="width: 95%; height: auto;"></div>
                            </div>
                            <div class="ReportDescription">
                                <div style="background-color: transparent;">
                                    <p style="font-weight: bold; font-size: 1.5rem; margin-top: 0; margin-bottom: 0; padding: 1rem 1rem 1rem; color: #1C1E3D">MODEL SUMMARY</p>
                                    <p style="font-weight: 500; font-size: 1rem; padding: 1rem 1rem 1rem; color: #1C1E3D">
                                        First, we must identify the baseline model. That would simply be guessing the majority class. Doing this would yield an accuracy of 63%.<br>
                                        Best model: Tuned Gradient Boosting<br>
                                        Accuracy: 73%.<br>
                                        Recall: 87%<br>
                                        F1: 80%<br>
                                        Precision: 75%<br>                                        
                                        <br><br>
                                        <a href="#B4"><img src="../static/img/previous.png" style="width: 5%; height: auto"></a>
                                        <a href="#B6"><img src="../static/img/after.png" style="width: 5%; height: auto;"></a>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                <section id="B6" style="display: flex;">
                    <div class="dashboardBanPosition" style="display: flex; align-items: center;">
                        <div class="graphFormContainer" style="box-shadow: none;">
                            <div class="ReportImg">
                                <img src="../static/img/cm.png" style="width: 95%; height: auto;">
                            </div>
                            <div class="ReportDescription">
                                <div style="background-color: transparent;">
                                    <p style="font-weight: bold; font-size: 1.5rem; margin-top: 0; margin-bottom: 0; padding: 1rem 1rem 1rem; color: #1C1E3D">CONFUSION MATRIX</p>
                                    <p style="font-weight: 500; font-size: 1rem; padding: 1rem 1rem 1rem; color: #1C1E3D">
                                        From the confusion matrix of our best performing model, we can see that the model performs well when identifying true positive and negatives.<br><br> 
                                        However, the model does have a false positive rate of around %, representing tweets which were classified as positive but were in fact negative. <br><br>
                                        The false negative rate is much smaller. The false positive rate is troublesome as there may be large financial implications for investors may mistakenly buy rather than short.<br><br>
                                        <br><br>
                                        <a href="#B5"><img src="../static/img/previous.png" style="width: 5%; height: auto"></a>
                                        <a href="#B7"><img src="../static/img/after.png" style="width: 5%; height: auto;"></a>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                <section id="B7" style="display: flex;">
                    <div class="dashboardBanPosition" style="display: flex; align-items: center;">
                        <div class="graphFormContainer" style="box-shadow: none;">
                            <div class="ReportImg">
                                <img src="../static/img/rl_conclusion.png" style="width: 95%; height: auto;">
                            </div>
                            <div class="ReportDescription">
                                <div style="background-color: transparent;">
                                    <p style="font-weight: bold; font-size: 1.5rem; margin-top: 0; margin-bottom: 0; padding: 1rem 1rem 1rem; color: #1C1E3D">CONCLUSION</p>
                                    <p style="font-weight: 500; font-size: 1rem; padding: 1rem 1rem 1rem; color: #1C1E3D">
                                        An accuracy score of 73% is not a bad starting point. There are a few improvements to be made. <br><br>
                                        The vectorization method used was a simple count vectorizer. Other options include TF-IDF vectorization. <br><br> 
                                        Rather than using traditional models, we can opt to leverage neural networks e.g. LSTM, GRU, include attention and transformers and utilize word embeddings as our vectorization strategy.  <br><br>
                                        Ultimately, at this stage of the models, investors cannot rely largely on its results. <br><br>
                                        <br><br>
                                        <a href="#B6"><img src="../static/img/previous.png" style="width: 5%; height: auto"></a>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </section>
        <section id="backTesting">
            <div class="modelContainer" style="display: flex; flex-direction: column; width: 100%;">
                <div class="carouselHeader" style="height: 3rem; display: flex;">
                    <div style="color: #1C1E3D; font-weight: bold; font-size: 1.5rem; display: inline-flex;">
                        Select Interval
                    </div>
                    <span style="margin-top: 0.6rem; position: absolute; left: 50%; display: inline-flex; align-items: center; justify-content: center; transform: translate(-50%, 0%); width: 55rem;">
                        <input type="date" id="startDate" name="startDate" value="2020-05-04" min="2020-05-04" max="2022-04-01" style="margin-right: 1rem;">
                        to
                        <input type="date" id="endDate" name="endDate" value="2021-05-04" min="2020-05-04" max="2022-04-01" style="margin-left: 1rem;">
                    </span>
                    <span style="position: absolute; right: 0;">
                        <button type="Button" style="width: 10rem; height: 2.5rem; padding: 0 0 0; margin: 0 0 0;" class="btn btn-primary" onclick="callback3_1()">Test</button> 
                    </span>
                </div>
                <div style="display: flex; position: relative; height: 70vh; top: 8rem; width: 90vw; transform: translate(-50%, 0%); left: 50%;">
                    <div class="backTestingTables" style="flex: 1; margin: 0 1rem 0;">
                        <table id="backTestTable" class="display" style="width:100%; text-align: center;">
                            <thead>
                                <tr>
                                    <th id="backTestTh1" style="display: none">Date</th>
                                    <th id="backTestTh2" style="display: none">Model Return</th>
                                    <th id="backTestTh3" style="display: none">Market Return</th>
                                    <th id="backTestTh4" style="display: none">Model Gain/Loss</th>
                                </tr>
                            </thead>
                        </table>
                    </div>
                    <div id="backTestGraph" style="flex: 1; margin: 0 1rem 0;"></div>
                    <div id="backTestMarketVsModel" style="flex: 1; margin: 0 1rem 0;"></div>
                </div>
            </div>
        </section>
        <section id="modelling">
            <div class="modelContainer" style="display: flex; flex-direction: column;">
                <div class="carouselHeader">
                    <span style="position: absolute; left: 0.5rem; color: #1C1E3D; font-weight: bold; font-size: 1.5rem;">
                        Daily Return on Investment
                    </span>
                    <span style="position: absolute; right: 0;">
                        <button type="Button" style="width: 10rem; height: 2.5rem; padding: 0 0 0; margin: 0 0 0;" class="btn btn-primary" onclick="callback2()">Fetch</button> 
                    </span>
                </div>
                <div style="height: 15rem; position: relative;">
                    <div class="container">
                        <section id="C1">
                            <div class="dashboardBanPosition">
                                <div class="roiCarousel" style="height: 8rem; background-color: transparent; box-shadow: none;">
                                    <div class="BanRectangle" style="width: 10vw; background-color: transparent; text-align: center; box-shadow: none;"></div>
                                    <div id="roiAAPL" style="height: 7rem; display: flex; align-items: center; justify-content: center; text-align: left; flex: 1;">
                                        <div style="font-size: 2rem; font-weight: bold;">
                                            <span id="AAPL">-</span>%
                                        </div>
                                        - AAPL -
                                    </div>
                                    <div id="roiAMGN" style="height: 7rem; display: flex; align-items: center; justify-content: center; text-align: left; flex: 1;">
                                        <div style="font-size: 2rem; font-weight: bold;">
                                            <span id="AMGN">-</span>%
                                        </div>
                                        - AMGN - 
                                    </div>
                                    <div id="roiAXP" style="height: 7rem; display: flex; align-items: center; justify-content: center; text-align: left; flex: 1;">
                                        <div style="font-size: 2rem; font-weight: bold;">
                                            <span id="AXP">-</span>%
                                        </div>
                                        - AXP - 
                                    </div>
                                    <div id="roiBA" style="height: 7rem; display: flex; align-items: center; justify-content: center; text-align: left; flex: 1;">
                                        <div style="font-size: 2rem; font-weight: bold;">
                                            <span id="BA">-</span>%
                                        </div>
                                        - BA - 
                                    </div>
                                    <div id="roiCAT" style="height: 7rem; display: flex; align-items: center; justify-content: center; text-align: left; flex: 1;">
                                        <div style="font-size: 2rem; font-weight: bold;">
                                            <span id="CAT">-</span>%
                                        </div>
                                        - CAT - 
                                    </div>
                                    <div class="BanRectangle" style="width: 10vw; background-color: transparent; text-align: center; box-shadow: none;">
                                        <a href="#C2"><img src="../static/img/after.png" style="width: 25%; height: auto;"></a>
                                    </div>
                                </div>
                            </div>
                        </section>
                        <section id="C2">
                            <div class="dashboardBanPosition">
                                <div class="roiCarousel" style="height: 8rem; background-color: transparent; box-shadow: none;">
                                    <div class="BanRectangle" style="width: 10vw; background-color: transparent; text-align: center; box-shadow: none;">
                                        <a href="#C1"><img src="../static/img/previous.png" style="width: 25%; height: auto;"></a>
                                    </div>
                                    <div id="roiCRM" style="height: 7rem; display: flex; align-items: center; justify-content: center; text-align: left; flex: 1;">
                                        <div style="font-size: 2rem; font-weight: bold;">
                                            <span id="CRM">-</span>%
                                        </div>
                                        - CRM - 
                                    </div>
                                    <div id="roiCSCO" style="height: 7rem; display: flex; align-items: center; justify-content: center; text-align: left; flex: 1;">
                                        <div style="font-size: 2rem; font-weight: bold;">
                                            <span id="CSCO">-</span>%
                                        </div>
                                        - CSCO - 
                                    </div>
                                    <div id="roiCVX" style="height: 7rem; display: flex; align-items: center; justify-content: center; text-align: left; flex: 1;">
                                        <div style="font-size: 2rem; font-weight: bold;">
                                            <span id="CVX">-</span>%
                                        </div>
                                        - CVX - 
                                    </div>
                                    <div id="roiDIS" style="height: 7rem; display: flex; align-items: center; justify-content: center; text-align: left; flex: 1;">
                                        <div style="font-size: 2rem; font-weight: bold;">
                                            <span id="DIS">-</span>%
                                        </div>
                                        - DIS - 
                                    </div>
                                    <div id="roiDOW" style="height: 7rem; display: flex; align-items: center; justify-content: center; text-align: left; flex: 1;">
                                        <div style="font-size: 2rem; font-weight: bold;">
                                            <span id="DOW">-</span>%
                                        </div>
                                        - DOW - 
                                    </div>
                                    <div class="BanRectangle" style="width: 10vw; background-color: transparent; text-align: center; box-shadow: none;">
                                        <a href="#C3"><img src="../static/img/after.png" style="width: 25%; height: auto;"></a>
                                    </div>
                                </div>
                            </div>
                        </section>
                        <section id="C3">
                            <div class="dashboardBanPosition">
                                <div class="roiCarousel" style="height: 8rem; background-color: transparent; box-shadow: none;">
                                    <div class="BanRectangle" style="width: 10vw; background-color: transparent; text-align: center; box-shadow: none;">
                                        <a href="#C2"><img src="../static/img/previous.png" style="width: 25%; height: auto;"></a>
                                    </div>
                                    <div id="roiGS" style="height: 7rem; display: flex; align-items: center; justify-content: center; text-align: left; flex: 1;">
                                        <div style="font-size: 2rem; font-weight: bold;">
                                            <span id="GS">-</span>%
                                        </div>
                                        - GS - 
                                    </div>
                                    <div id="roiHD" style="height: 7rem; display: flex; align-items: center; justify-content: center; text-align: left; flex: 1;">
                                        <div style="font-size: 2rem; font-weight: bold;">
                                            <span id="HD">-</span>%
                                        </div>
                                        - HD - 
                                    </div>
                                    <div id="roiHON" style="height: 7rem; display: flex; align-items: center; justify-content: center; text-align: left; flex: 1;">
                                        <div style="font-size: 2rem; font-weight: bold;">
                                            <span id="HON">-</span>%
                                        </div>
                                        - HON - 
                                    </div>
                                    <div id="roiIBM" style="height: 7rem; display: flex; align-items: center; justify-content: center; text-align: left; flex: 1;">
                                        <div style="font-size: 2rem; font-weight: bold;">
                                            <span id="IBM">-</span>%
                                        </div>
                                        - IBM - 
                                    </div>
                                    <div id="roiINTC" style="height: 7rem; display: flex; align-items: center; justify-content: center; text-align: left; flex: 1;">
                                        <div style="font-size: 2rem; font-weight: bold;">
                                            <span id="INTC">-</span>%
                                        </div>
                                        - INTC - 
                                    </div>
                                    <div class="BanRectangle" style="width: 10vw; background-color: transparent; text-align: center; box-shadow: none;">
                                        <a href="#C4"><img src="../static/img/after.png" style="width: 25%; height: auto;"></a>
                                    </div>
                                </div>
                            </div>
                        </section>
                        <section id="C4">
                            <div class="dashboardBanPosition">
                                <div class="roiCarousel" style="height: 8rem; background-color: transparent; box-shadow: none;">
                                    <div class="BanRectangle" style="width: 10vw; background-color: transparent; text-align: center; box-shadow: none;">
                                        <a href="#C3"><img src="../static/img/previous.png" style="width: 25%; height: auto;"></a>
                                    </div>
                                    <div id="roiJNJ" style="height: 7rem; display: flex; align-items: center; justify-content: center; text-align: left; flex: 1;">
                                        <div style="font-size: 2rem; font-weight: bold;">
                                            <span id="JNJ">-</span>%
                                        </div>
                                        - JNJ - 
                                    </div>
                                    <div id="roiJPM" style="height: 7rem; display: flex; align-items: center; justify-content: center; text-align: left; flex: 1;">
                                        <div style="font-size: 2rem; font-weight: bold;">
                                            <span id="JPM">-</span>%
                                        </div>
                                        - JPM - 
                                    </div>
                                    <div id="roiKO" style="height: 7rem; display: flex; align-items: center; justify-content: center; text-align: left; flex: 1;">
                                        <div style="font-size: 2rem; font-weight: bold;">
                                            <span id="KO">-</span>%
                                        </div>
                                        - KO - 
                                    </div>
                                    <div id="roiMCD" style="height: 7rem; display: flex; align-items: center; justify-content: center; text-align: left; flex: 1;">
                                        <div style="font-size: 2rem; font-weight: bold;">
                                            <span id="MCD">-</span>%
                                        </div>
                                        - MCD - 
                                    </div>
                                    <div id="roiMMM" style="height: 7rem; display: flex; align-items: center; justify-content: center; text-align: left; flex: 1;">
                                        <div style="font-size: 2rem; font-weight: bold;">
                                            <span id="MMM">-</span>%
                                        </div>
                                        - MMM - 
                                    </div>
                                    <div class="BanRectangle" style="width: 10vw; background-color: transparent; text-align: center; box-shadow: none;">
                                        <a href="#C5"><img src="../static/img/after.png" style="width: 25%; height: auto;"></a>
                                    </div>
                                </div>
                            </div>
                        </section>
                        <section id="C5">
                            <div class="dashboardBanPosition">
                                <div class="roiCarousel" style="height: 8rem; background-color: transparent; box-shadow: none;">
                                    <div class="BanRectangle" style="width: 10vw; background-color: transparent; text-align: center; box-shadow: none;">
                                        <a href="#C4"><img src="../static/img/previous.png" style="width: 25%; height: auto;"></a>
                                    </div>
                                    <div id="roiMRK" style="height: 7rem; display: flex; align-items: center; justify-content: center; text-align: left; flex: 1;">
                                        <div style="font-size: 2rem; font-weight: bold;">
                                            <span id="MRK">-</span>%
                                        </div>
                                        - MRK - 
                                    </div>
                                    <div id="roiMSFT" style="height: 7rem; display: flex; align-items: center; justify-content: center; text-align: left; flex: 1;">
                                        <div style="font-size: 2rem; font-weight: bold;">
                                            <span id="MSFT">-</span>%
                                        </div>
                                        - MSFT - 
                                    </div>
                                    <div id="roiNKE" style="height: 7rem; display: flex; align-items: center; justify-content: center; text-align: left; flex: 1;">
                                        <div style="font-size: 2rem; font-weight: bold;">
                                            <span id="NKE">-</span>%
                                        </div>
                                        - NKE - 
                                    </div>
                                    <div id="roiPG" style="height: 7rem; display: flex; align-items: center; justify-content: center; text-align: left; flex: 1;">
                                        <div style="font-size: 2rem; font-weight: bold;">
                                            <span id="PG">-</span>%
                                        </div>
                                        - PG - 
                                    </div>
                                    <div id="roiTRV" style="height: 7rem; display: flex; align-items: center; justify-content: center; text-align: left; flex: 1;">
                                        <div style="font-size: 2rem; font-weight: bold;">
                                            <span id="TRV">-</span>%
                                        </div>
                                        - TRV - 
                                    </div>
                                    <div class="BanRectangle" style="width: 10vw; background-color: transparent; text-align: center; box-shadow: none;">
                                        <a href="#C6"><img src="../static/img/after.png" style="width: 25%; height: auto;"></a>
                                    </div>
                                </div>
                            </div>
                        </section>
                        <section id="C6">
                            <div class="dashboardBanPosition">
                                <div class="roiCarousel" style="height: 8rem; background-color: transparent; box-shadow: none;">
                                    <div class="BanRectangle" style="width: 10vw; background-color: transparent; text-align: center; box-shadow: none;">
                                        <a href="#C5"><img src="../static/img/previous.png" style="width: 25%; height: auto;"></a>
                                    </div>
                                    <div id="roiUNH" style="height: 7rem; display: flex; align-items: center; justify-content: center; text-align: left; flex: 1;">
                                        <div style="font-size: 2rem; font-weight: bold;">
                                            <span id="UNH">-</span>%
                                        </div>
                                        - UNH - 
                                    </div>
                                    <div id="roiV" style="height: 7rem; display: flex; align-items: center; justify-content: center; text-align: left; flex: 1;">
                                        <div style="font-size: 2rem; font-weight: bold;">
                                            <span id="V">-</span>%
                                        </div>
                                        - V - 
                                    </div>
                                    <div id="roiVZ" style="height: 7rem; display: flex; align-items: center; justify-content: center; text-align: left; flex: 1;">
                                        <div style="font-size: 2rem; font-weight: bold;">
                                            <span id="VZ">-</span>%
                                        </div>
                                        - VZ - 
                                    </div>
                                    <div id="roiWBA" style="height: 7rem; display: flex; align-items: center; justify-content: center; text-align: left; flex: 1;">
                                        <div style="font-size: 2rem; font-weight: bold;">
                                            <span id="WBA">-</span>%
                                        </div>
                                        - WBA - 
                                    </div>
                                    <div id="roiWMT" style="height: 7rem; display: flex; align-items: center; justify-content: center; text-align: left; flex: 1;">
                                        <div style="font-size: 2rem; font-weight: bold;">
                                            <span id="WMT">-</span>%
                                        </div>
                                        - WMT - 
                                    </div>
                                    <div class="BanRectangle" style="width: 10vw; background-color: transparent; text-align: center; box-shadow: none;">
                                    </div>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>
                <div class="modellingGraphs" style="height: 2.5rem; top: 1.5rem;">
                    <span style="position: absolute; left: 0.5rem; color: #1C1E3D; font-weight: bold; font-size: 1.5rem;">
                        Recommended Holdings
                    </span>
                    <span style="position: absolute; right: 0;">
                        <button type="Button" style="width: 10rem; height: 2.5rem; padding: 0 0 0; margin: 0 0 0;" class="btn btn-primary" onclick="callback3_2()">Model</button> 
                    </span>
                </div>
                <div class="modellingGraphs" style="height: 25rem; top: 1.5rem;">
                    <table id="modelTable" class="display" style="width:100%; text-align: center;">
                        <thead>
                            <tr>
                                <th id="modelTh1" style="display: none;">Ticker</th>
                                <th id="modelTh2" style="display: none;">Initial Holdings</th>
                                <th id="modelTh3" style="display: none;">Recommended Holdings</th>
                                <th id="modelTh4" style="display: none;">Holdings Percentage Change</th>
                            </tr>
                        </thead>
                    </table>
                </div>
            </div>
        </section>
    </div>
    <script>
        async function callback() {
            $(".loader-wrapper").fadeIn("slow")
            let Stock = document.getElementById('stock').value;
            let Period = document.getElementById('period').value;
            let Interval = document.getElementById('interval').value;
            let response = await fetch("/callback/getStock?data=" + Stock + "&period=" + Period + "&interval=" + Interval);
            if (response.ok) {
                let obj = await response.json();
                let name = document.getElementById('companyName');
                name.innerHTML = obj['companyName'];
                name = document.getElementById('sector');
                name.innerHTML = obj['companySector'];
                name = document.getElementById('ROI');
                name.innerHTML = obj['companyROI'];
                name = document.getElementById('std');
                name.innerHTML = obj['companyStd'];

                let chartJson = JSON.parse(obj['graphJson'])
                Plotly.newPlot("chart", chartJson['data'], chartJson['layout']);
                $(".loader-wrapper").fadeOut("slow")
            }
            else {
                alert("HTTP-Error: " + response.status + "on getStock");
            }
        }
    </script>
    <script>
        let RL_json_str = '{"data":[{"alignmentgroup":"True","customdata":[[0.459],[0.444],[2.196],[0.408],[0.395]],"hovertemplate":"Model=%{x}<br>Cumulative Sum(%)=%{marker.color}<br>Sharpe Ratio=%{customdata[0]}<extra></extra>","legendgroup":"","marker":{"color":[14.1,13.4,12.2,11.7,11.2],"coloraxis":"coloraxis","pattern":{"shape":""}},"name":"","offsetgroup":"","orientation":"v","showlegend":false,"textposition":"auto","x":["a2c","ppo","baseline","sac","ddpg"],"xaxis":"x","y":[14.1,13.4,12.2,11.7,11.2],"yaxis":"y","type":"bar"}],"layout":{"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"Model"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"Cumulative Summary (%)"}},"coloraxis":{"colorbar":{"title":{"text":"Cumulative Sum(%)"}},"colorscale":[[0.0,"rgb(253, 237, 176)"],[0.09090909090909091,"rgb(250, 205, 145)"],[0.18181818181818182,"rgb(246, 173, 119)"],[0.2727272727272727,"rgb(240, 142, 98)"],[0.36363636363636365,"rgb(231, 109, 84)"],[0.45454545454545453,"rgb(216, 80, 83)"],[0.5454545454545454,"rgb(195, 56, 90)"],[0.6363636363636364,"rgb(168, 40, 96)"],[0.7272727272727273,"rgb(138, 29, 99)"],[0.8181818181818182,"rgb(107, 24, 93)"],[0.9090909090909091,"rgb(76, 21, 80)"],[1.0,"rgb(47, 15, 61)"]]},"legend":{"tracegroupgap":0},"title":{"text":"Portfolio Optimization model summary"},"barmode":"relative","shapes":[{"line":{"color":"black","dash":"dot"},"type":"line","x0":0,"x1":1,"xref":"x domain","y0":12.2,"y1":12.2,"yref":"y"}]}}'
        let RL_obj = JSON.parse(RL_json_str)
        let RL_data = RL_obj['data']
        let RL_layout = RL_obj['layout']
        let RL_config = {responsive: true}
        Plotly.newPlot('RL_ReportGraph', RL_data, RL_layout, RL_config);
    </script>
    <script>
        let NLP_json_str = '{"data":[{"alignmentgroup":"True","customdata":[[0.869,0.752,0.806],[0.813,0.768,0.789],[0.753,0.799,0.775],[0.815,0.758,0.785],[0.952,0.698,0.805],[0.702,0.767,0.724],[0.681,0.756,0.716]],"hovertemplate":"classifiers=%{x}<br>val_accuracy=%{marker.color}<br>val_recall=%{customdata[0]}<br>val_precision=%{customdata[1]}<br>val_f1=%{customdata[2]}<extra></extra>","legendgroup":"","marker":{"color":[0.733,0.724,0.722,0.716,0.707,0.671,0.657],"coloraxis":"coloraxis","pattern":{"shape":""}},"name":"","offsetgroup":"","orientation":"v","showlegend":false,"textposition":"auto","x":["Tuned Gradient_boost","Tuned Random_Forest","Tuned Logistic_regresion","Naive_Bayes","Gradient_boost","Random_Forest","Logistic_regresion"],"xaxis":"x","y":[0.733,0.724,0.722,0.716,0.707,0.671,0.657],"yaxis":"y","type":"bar"}],"layout":{"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"Classifiers"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"Val Accuracy (%)"}},"coloraxis":{"colorbar":{"title":{"text":"val_accuracy"}},"colorscale":[[0.0,"rgb(253, 237, 176)"],[0.09090909090909091,"rgb(250, 205, 145)"],[0.18181818181818182,"rgb(246, 173, 119)"],[0.2727272727272727,"rgb(240, 142, 98)"],[0.36363636363636365,"rgb(231, 109, 84)"],[0.45454545454545453,"rgb(216, 80, 83)"],[0.5454545454545454,"rgb(195, 56, 90)"],[0.6363636363636364,"rgb(168, 40, 96)"],[0.7272727272727273,"rgb(138, 29, 99)"],[0.8181818181818182,"rgb(107, 24, 93)"],[0.9090909090909091,"rgb(76, 21, 80)"],[1.0,"rgb(47, 15, 61)"]]},"legend":{"tracegroupgap":0},"title":{"text":"NLP model summary"},"barmode":"relative","shapes":[{"line":{"color":"black","dash":"dot"},"type":"line","x0":0,"x1":1,"xref":"x domain","y0":0.63,"y1":0.63,"yref":"y"}]}}'
        let NLP_obj = JSON.parse(NLP_json_str)
        let NLP_data = NLP_obj['data']
        let NLP_layout = NLP_obj['layout']
        let NLP_config = {responsive: true}
        Plotly.newPlot('SA_ReportGraph', NLP_data, NLP_layout, NLP_config);
    </script>
    <script>
        async function callback2() {
            $(".loader-wrapper").fadeIn("slow")
            let roi_response = await fetch("/callback2/fetchROI")
            if (roi_response.ok) {
                let summary_obj = await roi_response.json()
                let roi_obj = JSON.parse(summary_obj['roi_dict'])

                for (const [key, value] of Object.entries(roi_obj)) {
                    let roi_name = document.getElementById(key);
                    roi_name.innerHTML = value;
                    let roiId = 'roi' + key;

                    let color = '#808080';

                    if (value < 0) {
                        color = 'darkred';
                    } else if (value > 0) {
                        color = 'darkgreen';
                    }

                    document.getElementById(roiId).style.backgroundColor = color;

                }

                $(".loader-wrapper").fadeOut("slow")

            } else {
                alert('error')
            }
        }
    </script>
    <script>
        async function callback3_1() {
            $(".loader-wrapper").fadeIn("slow")
            let startDate = document.getElementById('startDate').value;
            let endDate = document.getElementById('endDate').value;
            let backTestResponse = await fetch("/callback3/backTest?startDate=" + startDate + "&endDate=" + endDate);
            if (backTestResponse.ok) {
                $("#backTestTable").dataTable().fnDestroy();
                var data = await backTestResponse.json()
                
                $(document).ready(function() {
                var table = $('#backTestTable').DataTable({
                    'data': data['data'],
                    "scrollY": "55vh",
                    "scrollCollapse": true,
                    "paging": false,
                    "searching": false
                    });
                });

                for (let i = 1; i < 5; i++) {
                    let idName = 'backTestTh' + i;
                    document.getElementById(idName).style.display = "table-cell"
                }

                let backTestGraphObj = JSON.parse(data['graphJSON'])
                Plotly.newPlot("backTestGraph", backTestGraphObj['data'], backTestGraphObj['layout'], {responsive: true});

                let backTestMarketVsModelObj = JSON.parse(data['market_vs_model'])
                Plotly.newPlot("backTestMarketVsModel", backTestMarketVsModelObj['data'], backTestMarketVsModelObj['layout'], {responsive: true});

                $(".loader-wrapper").fadeOut("slow")

            } else {
                alert('error')
            }
        }
    </script>
    <script>
        async function callback3_2() {
            $(".loader-wrapper").fadeIn("slow")
            let model_response = await fetch("/callback3/createModel")
            if (model_response.ok) {
                $("#modelTable").dataTable().fnDestroy();
                var data = await model_response.json()
                
                $(document).ready(function() {
                var table = $('#modelTable').DataTable({
                    'data': data['data'],
                    pageLength : 5,
                    lengthMenu: [[5], [5]]
                    });
                });

                for (let i = 1; i < 5; i++) {
                    let idName = 'modelTh' + i;
                    document.getElementById(idName).style.display = "table-cell"
                }
                $(".loader-wrapper").fadeOut("slow")

            } else {
                alert('error')
            }
        }
    </script>
    <script>
        $(window).on('load', function(){
            $(".loader-wrapper").fadeOut("slow")
        });
    </script>
</body>
</html>

